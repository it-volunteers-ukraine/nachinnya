<?php
$default_classes = [
    'title-template-part' => 'title-template-part',
];

$modules_file = get_template_directory() . '/assets/blocks/styles/modules.json';
$classes = $default_classes;

if (file_exists($modules_file)) {
    $modules = json_decode(file_get_contents($modules_file), true);
    $classes = array_merge($default_classes, $modules['history-section-block'] ?? []);
}
?>

<section class='section'>
    <div class='container'>
        <?php
            $h2_title = get_field('h2_title');
            if (!empty($h2_title)) : 
        ?>
            <div class="<?php echo esc_attr($classes['title-template-part']); ?>">
                <?php get_template_part('template-parts/h2-title'); ?>
            </div>
        <?php endif; ?>
        <div class="<?php echo esc_attr($classes['animation-container']); ?>">
            <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/MotionPathPlugin.min.js"></script>
            <div class="<?php echo esc_attr($classes['ball-container']); ?>">
                <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M17.0744 11.651C17.1051 11.4578 17.3296 11.6987 17.4021 11.7551C18.218 12.3907 18.697 13.077 18.8574 14.0541C19.0402 15.1681 19.0727 16.4133 18.9345 17.5329C18.7663 18.8954 17.7991 19.7079 16.6889 20.5519C14.5758 22.1584 12.6526 23.6848 9.73039 23.6317C6.5511 23.5738 5.25084 20.3706 5.32591 17.8365C5.43732 14.0757 11.5328 13.409 14.6264 13.3688C17.2977 13.334 19.5961 13.4233 20.1585 16.1102C20.6008 18.2232 18.4229 19.1118 16.3227 19.1118C15.1994 19.1118 14.5333 18.6292 13.9903 17.7758C13.744 17.3887 13.1247 16.5233 13.3928 16.0408C14.0354 14.8839 15.968 15.4813 16.1299 16.596C16.6106 19.9048 12.0607 20.5784 9.60509 18.973C8.16129 18.0291 7.6251 16.4339 7.44623 14.9043C7.34279 14.0198 7.29162 13.1516 7.6679 12.3017C8.40609 10.6342 10.3348 10.4183 12.1206 10.558C15.3193 10.8081 20.1764 12.0866 22.0764 14.6787C23.1717 16.173 21.9983 17.8858 20.4862 18.6954C18.6557 19.6755 16.1595 19.7849 14.2023 19.0424C11.1982 17.9027 8.2525 13.9039 9.89423 10.9483C11.8225 7.47691 18.5128 8.88231 20.9488 11.0264C24.0711 13.7746 23.6361 19.6645 21.556 22.7902C19.9348 25.2262 16.7688 25.5776 14.0096 24.6553C9.57421 23.1729 6.12249 19.3125 4.75728 15.312C3.50308 11.6368 3.46315 6.3091 6.54991 3.28804C8.35565 1.52073 11.1679 1.79315 13.3349 2.78487C16.1243 4.06136 18.0161 6.39383 19.0116 9.02243C20.0914 11.8735 20.5732 16.0162 18.4044 18.5566C15.7765 21.6347 10.643 23.0139 6.66556 21.2373C4.23895 20.1533 3.35352 18.0911 3.09957 15.7805C2.76842 12.7675 3.17129 9.99364 5.72106 7.82523C9.31242 4.77102 14.1406 4.39987 18.8285 4.65874C22.4053 4.85626 23.9386 9.02208 24.5533 11.7031C25.0819 14.0083 25.339 17.1504 24.1775 19.3461C23.2162 21.1631 21.9057 22.6426 20.3031 24.0394C18.4736 25.6339 16.6086 26.1831 14.0481 25.948C10.5002 25.6221 7.01136 23.7088 5.79816 20.604C4.30588 16.7849 4.5821 12.8879 8.41964 10.3497C10.8632 8.73361 14.4761 7.4654 17.5467 7.74715C21.6787 8.12631 23.4972 11.8616 24.0522 15.1385C24.3962 17.1698 24.4659 19.9947 22.7414 21.6103C20.87 23.3636 17.4344 23.0249 15.2143 22.1655C12.733 21.205 9.08458 19.0446 8.40037 16.4745C7.86524 14.4644 10.6056 14.0671 12.1398 14.5052C14.0229 15.043 15.6114 16.5739 15.9371 18.3484C16.3011 20.3312 14.2143 20.3491 12.7374 19.7017C12.1394 19.4397 10.4429 18.4218 11.6772 17.8539C12.3398 17.5491 12.9283 17.6193 13.6048 17.7411" stroke="#B74028" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </div>
            <div class="<?php echo esc_attr($classes['path-container']); ?>">
                <svg width="393" height="2720" viewBox="0 0 393 2720" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M114 1353C-38.0001 1386 -42.96 1653.76 161.554 1674.26M161.554 1674.26C179.5 1679 198.069 1667.03 191.5 1655.5C185.079 1644.23 158 1656 161.554 1674.26ZM161.554 1674.26C-14.9999 1875.5 161.554 2021.51 320.983 2043.29M320.983 2043.29C346.487 2053.51 349.374 2047.38 352.743 2043.29C359.961 2040.57 363.329 1994.96 332.051 2001.09C315.311 2008.72 316.171 2022.87 320.983 2043.29ZM320.983 2043.29C418.094 2189.9 388.977 2200.98 136.5 2226.5M12.9606 1C-7.80271 69.6415 2.62083 263.752 172.082 278.598M172.082 278.598C185.624 278.598 197.838 272.255 192.395 263.902C187.075 255.737 177.886 263.902 172.082 278.598ZM172.082 278.598C156.121 362.966 172.082 530.122 304.185 545.902M304.185 545.902C325.318 553.299 327.71 548.861 330.501 545.902C336.482 543.93 339.273 510.89 313.356 515.329C299.486 520.861 300.198 531.109 304.185 545.902ZM304.185 545.902C368.884 631.285 184.5 563.5 30.5002 663.5M16.5 2317C20 2257 48.5801 2239.25 136 2227M16.0005 2318C16.0005 2376.5 -9.65889 2507.61 155.586 2517.7M155.586 2517.7C168.791 2517.7 180.701 2513.39 175.393 2507.71C170.206 2502.16 161.245 2507.71 155.586 2517.7ZM155.586 2517.7C140.022 2575.05 155.586 2688.67 284.402 2699.4M284.402 2699.4C305.009 2704.43 307.342 2701.41 310.063 2699.4C315.895 2698.06 327.773 2678.48 302.5 2681.5C288.975 2685.26 280.514 2689.34 284.402 2699.4ZM284.402 2699.4C264 2715 217.5 2718.5 199.5 2718.5M27.503 665C-32.3202 740.009 7.25038 902.634 165.419 912.727M165.419 912.727C178.059 912.727 189.46 908.415 184.379 902.736C179.414 897.185 170.837 902.736 165.419 912.727ZM165.419 912.727C150.522 970.083 165.42 1083.72 288.72 1094.45M288.72 1094.45C308.445 1099.48 310.678 1096.46 313.283 1094.45C318.865 1093.11 330.234 1073.53 306.043 1076.55C293.6 1079.05 293.6 1085.05 288.72 1094.45ZM288.72 1094.45C264.23 1107.64 338.588 1173.06 306.043 1212.06C273.499 1251.07 363.283 1305.57 363.283 1305.57M363.283 1305.57C375.178 1317.71 384.28 1311.57 388.588 1305.57C392.895 1299.57 393.374 1293.07 388.588 1289.07C383.802 1285.07 372.665 1285.08 363.283 1305.57ZM363.283 1305.57L113.65 1353.08" stroke="#B74028" stroke-width="2" stroke-dasharray="4 4"/>
                </svg>
            </div>
        </div>
    </div>
</section>